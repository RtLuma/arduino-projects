<html>

<head>
    <style type="text/css">
        fieldset {
            display: inline;
        }
        
        legend {
            text-align: center;
        }
    </style>
    <script>
/*
   return fetch(url, {
   body: JSON.stringify(data), // must match 'Content-Type' header
   cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
   credentials: 'same-origin', // include, same-origin, *omit
   headers: {
   'user-agent': 'Mozilla/4.0 MDN Example',
   'content-type': 'application/json'
   },
   method: 'POST', // *GET, POST, PUT, DELETE, etc.
   mode: 'cors', // no-cors, cors, *same-origin
   redirect: 'follow', // manual, *follow, error
   referrer: 'no-referrer', // *client, no-referrer })
   */

        const API_URL = "http://10.0.0.69?";
        let cansend = true;
        async function sendPacket(inputNode) {
            if (!cansend) return; 
            let query = `${API_URL}${inputNode.name}=${inputNode.value}`;
            const resp = await fetch(query, {
                mode: 'no-cors',
                credentials: "include",
            })
            cansend=true;
            console.log(inputNode.value)
        }
    </script>
</head>

<body>
    <pre></pre>
    <fieldset>
        <legend>Red</legend>
        <input type="range" value="0" min="0" max="255" name="r" oninput="sendPacket(this)" >
    </fieldset>
    <fieldset>
        <legend>Green</legend>
        <input type="range" value="0" min="0" max="255" name="g" oninput="sendPacket(this)" >
    </fieldset>
    <fieldset>
        <legend>Blue</legend>
        <input type="range" value="0" min="0" max="255" name="b" oninput="sendPacket(this)" >
    </fieldset>
    <br>
    <fieldset>
        <legend>Width</legend>
        <input type="range" value="0" min="2" max="50" name="w" oninput="sendPacket(this)" >
    </fieldset>
    <fieldset>
        <legend>Speed</legend>
        <input type="range" value="0" min="5" max="128" name="f" oninput="sendPacket(this)" >
    </fieldset>
    <br>
    <input type="button" value="Next" name="Next" onclick="next()">
</body>

</html>